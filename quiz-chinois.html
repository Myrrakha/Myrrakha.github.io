<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Master - Chinois simplifiÃ©</title>
  <style>
    body { background: linear-gradient(135deg, #0f1115, #1c1c24); color: #f0f0f0; font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; }
    .navbar { background: #1a1a24; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
    .nav-title { font-size: 1.3em; font-weight: 600; }
    .nav-right { display: flex; gap: 10px; }
    .center { max-width: 600px; margin: 60px auto; background: #23233a; border-radius: 16px; padding: 32px; box-shadow: 0 8px 32px rgba(0,0,0,0.4); }
    h1 { text-align: center; margin-bottom: 10px; }
    .subtitle { text-align: center; color: #aaa; margin-bottom: 30px; font-size: 1.1em; }
    .action-btn { padding: 12px 25px; border-radius: 10px; background: #3a3a50; border: none; cursor: pointer; color: #f0f0f0; transition: 0.25s; font-size: 1em; }
    .action-btn:hover { background: #4e4e6a; }
    .action-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    #quiz-main { display: none; }
    #quiz-question { font-size: 1.5em; margin-bottom: 24px; text-align: center; }
    #quiz-answers { display: flex; flex-direction: column; gap: 14px; }
    .answer-btn { width: 100%; padding: 15px; border-radius: 10px; background: #3a3a50; border: none; cursor: pointer; color: #f0f0f0; font-size: 1.1em; transition: 0.25s; text-align: left; }
    .answer-btn:hover:not(:disabled) { background: #4e4e6a; transform: translateX(5px); }
    .answer-btn:disabled { cursor: default; }
    .stats { margin: 24px 0; display: flex; justify-content: space-around; font-size: 1.1em; }
    .stats span { font-weight: 600; }
    #quiz-result { display: none; text-align: center; }
    .final-score { font-size: 2em; color: #2ecc71; margin: 20px 0; }
    .loading { text-align: center; padding: 40px; font-size: 1.2em; color: #aaa; }
  </style>
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="nav-left">
        <span class="nav-title">ğŸ¯ Quiz Master - Chinois simplifiÃ©</span>
      </div>
      <div class="nav-right">
        <button class="action-btn" onclick="window.location.href='index.html'">â† Retour</button>
        <button class="action-btn" onclick="window.location.href='settings.html'">RÃ©glages</button>
      </div>
    </nav>
  </header>

  <div class="center">
    <div id="loading" class="loading">
      <p>Chargement du quiz...</p>
    </div>

    <div id="quiz-main">
      <h1 id="quiz-title">Quiz Chinois</h1>
      <p class="subtitle" id="quiz-subtitle"></p>
      
      <div id="quiz-question"></div>
      <div id="quiz-answers"></div>
      
      <div class="stats">
        <div>Score : <span id="quiz-score">0</span></div>
        <div>Vies : <span id="quiz-lives">â¤â¤â¤</span></div>
      </div>
      
      <button class="action-btn" id="quiz-next-btn" style="display:none; width:100%; margin-top:20px;">Question suivante</button>
      <button class="action-btn" id="quiz-restart-btn" style="display:none; width:100%; margin-top:20px;">Recommencer ce niveau</button>
    </div>

    <div id="quiz-result">
      <h1>ğŸ‰ Quiz terminÃ© !</h1>
      <div class="final-score">Score : <span id="quiz-final-score">0</span></div>
      <p style="font-size:1.1em; margin:20px 0;" id="result-message"></p>
      <button class="action-btn" onclick="window.location.href='index.html'" style="width:100%; margin-top:20px;">Retour au menu principal</button>
      <button class="action-btn" id="retry-btn" style="width:100%; margin-top:10px;">Recommencer ce niveau</button>
    </div>
  </div>

  <script>
    // DonnÃ©es des quiz par niveau
    const quizData = {
      1: {
        title: "Niveau 1 : Chiffres 1-10",
        subtitle: "Apprenez les chiffres de base en chinois simplifiÃ©",
        questions: [
          { q: "Quel est le caractÃ¨re pour <strong>1</strong> ?", a: "ä¸€", opts: ["ä¸€", "äºŒ", "ä¸‰", "å"] },
          { q: "Quel est le caractÃ¨re pour <strong>2</strong> ?", a: "äºŒ", opts: ["äºŒ", "äº”", "å…«", "å…­"] },
          { q: "Quel est le caractÃ¨re pour <strong>3</strong> ?", a: "ä¸‰", opts: ["ä¸‰", "ä¹", "å››", "ä¸ƒ"] },
          { q: "Quel est le caractÃ¨re pour <strong>4</strong> ?", a: "å››", opts: ["å››", "äº”", "å…­", "ä¸‰"] },
          { q: "Quel est le caractÃ¨re pour <strong>5</strong> ?", a: "äº”", opts: ["äº”", "å…«", "ä¸€", "å"] },
          { q: "Quel est le caractÃ¨re pour <strong>6</strong> ?", a: "å…­", opts: ["å…­", "ä¹", "äºŒ", "å…«"] },
          { q: "Quel est le caractÃ¨re pour <strong>7</strong> ?", a: "ä¸ƒ", opts: ["ä¸ƒ", "ä¸‰", "å", "å››"] },
          { q: "Quel est le caractÃ¨re pour <strong>8</strong> ?", a: "å…«", opts: ["å…«", "äº”", "å…­", "ä¹"] },
          { q: "Quel est le caractÃ¨re pour <strong>9</strong> ?", a: "ä¹", opts: ["ä¹", "ä¸€", "ä¸ƒ", "äºŒ"] },
          { q: "Quel est le caractÃ¨re pour <strong>10</strong> ?", a: "å", opts: ["å", "ä¸‰", "å…«", "äº”"] },
        ]
      },
      2: {
        title: "Niveau 2 : Jours de la semaine",
        subtitle: "MaÃ®trisez les jours de la semaine en chinois",
        questions: [
          { q: "Comment Ã©crit-on <strong>'lundi'</strong> ?", a: "æ˜ŸæœŸä¸€", opts: ["æ˜ŸæœŸä¸€", "æ˜ŸæœŸå¤©", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸäº”"] },
          { q: "Comment Ã©crit-on <strong>'mardi'</strong> ?", a: "æ˜ŸæœŸäºŒ", opts: ["æ˜ŸæœŸäºŒ", "æ˜ŸæœŸå››", "æ˜ŸæœŸæ—¥", "æ˜ŸæœŸå…­"] },
          { q: "Comment Ã©crit-on <strong>'mercredi'</strong> ?", a: "æ˜ŸæœŸä¸‰", opts: ["æ˜ŸæœŸä¸‰", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå¤©"] },
          { q: "Comment Ã©crit-on <strong>'jeudi'</strong> ?", a: "æ˜ŸæœŸå››", opts: ["æ˜ŸæœŸå››", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸå…­", "æ˜ŸæœŸä¸‰"] },
          { q: "Comment Ã©crit-on <strong>'vendredi'</strong> ?", a: "æ˜ŸæœŸäº”", opts: ["æ˜ŸæœŸäº”", "æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸå››"] },
          { q: "Comment Ã©crit-on <strong>'samedi'</strong> ?", a: "æ˜ŸæœŸå…­", opts: ["æ˜ŸæœŸå…­", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸäº”", "æ˜ŸæœŸäºŒ"] },
          { q: "Comment Ã©crit-on <strong>'dimanche'</strong> ?", a: "æ˜ŸæœŸå¤©", opts: ["æ˜ŸæœŸå¤©", "æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäº”"] },
          { q: "Quel jour vient aprÃ¨s æ˜ŸæœŸä¸‰ ?", a: "æ˜ŸæœŸå››", opts: ["æ˜ŸæœŸå››", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå…­"] },
          { q: "Quel jour vient avant æ˜ŸæœŸå¤© ?", a: "æ˜ŸæœŸå…­", opts: ["æ˜ŸæœŸå…­", "æ˜ŸæœŸäº”", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸæ—¥"] },
          { q: "Quel est le premier jour de la semaine ?", a: "æ˜ŸæœŸä¸€", opts: ["æ˜ŸæœŸä¸€", "æ˜ŸæœŸå¤©", "æ˜ŸæœŸæ—¥", "æ˜ŸæœŸäºŒ"] },
        ]
      },
      3: {
        title: "Niveau 3 : Couleurs de base",
        subtitle: "DÃ©couvrez les couleurs en chinois simplifiÃ©",
        questions: [
          { q: "Comment Ã©crit-on <strong>'rouge'</strong> ?", a: "çº¢è‰²", opts: ["çº¢è‰²", "è“è‰²", "é»„è‰²", "ç™½è‰²"] },
          { q: "Comment Ã©crit-on <strong>'bleu'</strong> ?", a: "è“è‰²", opts: ["è“è‰²", "ç»¿è‰²", "é»‘è‰²", "çº¢è‰²"] },
          { q: "Comment Ã©crit-on <strong>'jaune'</strong> ?", a: "é»„è‰²", opts: ["é»„è‰²", "ç™½è‰²", "è“è‰²", "é»‘è‰²"] },
          { q: "Comment Ã©crit-on <strong>'vert'</strong> ?", a: "ç»¿è‰²", opts: ["ç»¿è‰²", "çº¢è‰²", "é»„è‰²", "è“è‰²"] },
          { q: "Comment Ã©crit-on <strong>'noir'</strong> ?", a: "é»‘è‰²", opts: ["é»‘è‰²", "ç™½è‰²", "è“è‰²", "çº¢è‰²"] },
          { q: "Comment Ã©crit-on <strong>'blanc'</strong> ?", a: "ç™½è‰²", opts: ["ç™½è‰²", "é»‘è‰²", "é»„è‰²", "ç»¿è‰²"] },
          { q: "Quelle couleur reprÃ©sente çº¢è‰² ?", a: "Rouge", opts: ["Rouge", "Bleu", "Jaune", "Vert"] },
          { q: "Quelle couleur reprÃ©sente é»‘è‰² ?", a: "Noir", opts: ["Noir", "Blanc", "Gris", "Bleu"] },
        ]
      },
      4: {
        title: "Niveau 4 : Membres de la famille",
        subtitle: "Apprenez Ã  dÃ©signer les membres de la famille",
        questions: [
          { q: "Comment Ã©crit-on <strong>'maman'</strong> ?", a: "å¦ˆå¦ˆ", opts: ["å¦ˆå¦ˆ", "çˆ¸çˆ¸", "å“¥å“¥", "å§å§"] },
          { q: "Comment Ã©crit-on <strong>'papa'</strong> ?", a: "çˆ¸çˆ¸", opts: ["çˆ¸çˆ¸", "å¦ˆå¦ˆ", "å¼Ÿå¼Ÿ", "å¦¹å¦¹"] },
          { q: "Comment Ã©crit-on <strong>'grand frÃ¨re'</strong> ?", a: "å“¥å“¥", opts: ["å“¥å“¥", "å¼Ÿå¼Ÿ", "å§å§", "å¦¹å¦¹"] },
          { q: "Comment Ã©crit-on <strong>'petit frÃ¨re'</strong> ?", a: "å¼Ÿå¼Ÿ", opts: ["å¼Ÿå¼Ÿ", "å“¥å“¥", "çˆ¸çˆ¸", "å¦ˆå¦ˆ"] },
          { q: "Comment Ã©crit-on <strong>'grande sÅ“ur'</strong> ?", a: "å§å§", opts: ["å§å§", "å¦¹å¦¹", "å¦ˆå¦ˆ", "å“¥å“¥"] },
          { q: "Comment Ã©crit-on <strong>'petite sÅ“ur'</strong> ?", a: "å¦¹å¦¹", opts: ["å¦¹å¦¹", "å§å§", "çˆ¸çˆ¸", "å¼Ÿå¼Ÿ"] },
          { q: "Qui est çˆ¸çˆ¸ ?", a: "Papa", opts: ["Papa", "Maman", "Grand-pÃ¨re", "Oncle"] },
          { q: "Qui est å§å§ ?", a: "Grande sÅ“ur", opts: ["Grande sÅ“ur", "Petite sÅ“ur", "Maman", "Tante"] },
        ]
      },
      5: {
        title: "Niveau 5 : Animaux courants",
        subtitle: "DÃ©couvrez les animaux en chinois simplifiÃ©",
        questions: [
          { q: "Comment Ã©crit-on <strong>'chat'</strong> ?", a: "çŒ«", opts: ["çŒ«", "ç‹—", "é¸Ÿ", "é©¬"] },
          { q: "Comment Ã©crit-on <strong>'chien'</strong> ?", a: "ç‹—", opts: ["ç‹—", "çŒ«", "é±¼", "ç‰›"] },
          { q: "Comment Ã©crit-on <strong>'oiseau'</strong> ?", a: "é¸Ÿ", opts: ["é¸Ÿ", "é©¬", "ç‹—", "çŒ«"] },
          { q: "Comment Ã©crit-on <strong>'poisson'</strong> ?", a: "é±¼", opts: ["é±¼", "ç‰›", "çŒ«", "ç‹—"] },
          { q: "Comment Ã©crit-on <strong>'cheval'</strong> ?", a: "é©¬", opts: ["é©¬", "é¸Ÿ", "é±¼", "ç‰›"] },
          { q: "Comment Ã©crit-on <strong>'vache'</strong> ?", a: "ç‰›", opts: ["ç‰›", "é©¬", "çŒ«", "ç‹—"] },
          { q: "Quel animal reprÃ©sente çŒ« ?", a: "Chat", opts: ["Chat", "Chien", "Tigre", "Lapin"] },
          { q: "Quel animal reprÃ©sente é±¼ ?", a: "Poisson", opts: ["Poisson", "Oiseau", "Grenouille", "Serpent"] },
          { q: "Quel animal reprÃ©sente é©¬ ?", a: "Cheval", opts: ["Cheval", "Vache", "Ã‚ne", "ZÃ¨bre"] },
        ]
      }
    };

    // Variables du quiz
    let currentLevel = null;
    let questions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let lives = 3;
    let answered = false;

    // Ã‰lÃ©ments DOM
    const loadingEl = document.getElementById('loading');
    const quizMain = document.getElementById('quiz-main');
    const quizResult = document.getElementById('quiz-result');
    const quizTitle = document.getElementById('quiz-title');
    const quizSubtitle = document.getElementById('quiz-subtitle');
    const quizQuestion = document.getElementById('quiz-question');
    const quizAnswers = document.getElementById('quiz-answers');
    const quizScore = document.getElementById('quiz-score');
    const quizLives = document.getElementById('quiz-lives');
    const quizNextBtn = document.getElementById('quiz-next-btn');
    const quizRestartBtn = document.getElementById('quiz-restart-btn');
    const quizFinalScore = document.getElementById('quiz-final-score');
    const resultMessage = document.getElementById('result-message');
    const retryBtn = document.getElementById('retry-btn');

    // Initialisation du quiz
    function initQuiz() {
      const hash = window.location.hash.replace('#', '');
      const level = parseInt(hash, 10);

      if (!level || !quizData[level]) {
        window.location.href = 'index.html';
        return;
      }

      currentLevel = level;
      const data = quizData[level];

      // Configuration de l'interface
      quizTitle.textContent = data.title;
      quizSubtitle.textContent = data.subtitle;
      
      // MÃ©lange des questions
      questions = [...data.questions].sort(() => Math.random() - 0.5);
      
      // RÃ©initialisation
      currentQuestionIndex = 0;
      score = 0;
      lives = 3;
      answered = false;

      // Affichage
      loadingEl.style.display = 'none';
      quizMain.style.display = 'block';
      quizResult.style.display = 'none';
      
      updateStats();
      showQuestion();
    }

    // Affichage d'une question
    function showQuestion() {
      if (currentQuestionIndex >= questions.length || lives <= 0) {
        endQuiz();
        return;
      }

      answered = false;
      quizNextBtn.style.display = 'none';
      quizRestartBtn.style.display = 'none';

      const question = questions[currentQuestionIndex];
      quizQuestion.innerHTML = question.q;
      quizAnswers.innerHTML = '';

      // MÃ©lange des options
      const shuffledOpts = [...question.opts].sort(() => Math.random() - 0.5);

      shuffledOpts.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = opt;
        btn.onclick = () => selectAnswer(opt, question.a, btn);
        quizAnswers.appendChild(btn);
      });
    }

    // SÃ©lection d'une rÃ©ponse
    function selectAnswer(selected, correct, btn) {
      if (answered) return;
      answered = true;

      // DÃ©sactivation de tous les boutons et mise en couleur
      Array.from(quizAnswers.children).forEach(b => {
        b.disabled = true;
        if (b.textContent === correct) {
          b.style.background = '#2ecc71';
        }
        if (b.textContent === selected && selected !== correct) {
          b.style.background = '#e74c3c';
        }
      });

      // Mise Ã  jour du score/vies
      if (selected === correct) {
        score++;
      } else {
        lives--;
      }

      updateStats();

      // Affichage du bouton suivant ou fin
      if (lives > 0 && currentQuestionIndex < questions.length - 1) {
        quizNextBtn.style.display = 'block';
      } else {
        quizRestartBtn.style.display = 'block';
      }
    }

    // Mise Ã  jour des statistiques
    function updateStats() {
      quizScore.textContent = score;
      quizLives.textContent = 'â¤'.repeat(lives) + 'â™¡'.repeat(3 - lives);
    }

    // Bouton suivant
    quizNextBtn.onclick = () => {
      currentQuestionIndex++;
      showQuestion();
    };

    // Bouton recommencer
    quizRestartBtn.onclick = () => {
      initQuiz();
    };

    // Fin du quiz
    function endQuiz() {
      quizMain.style.display = 'none';
      quizResult.style.display = 'block';
      quizFinalScore.textContent = score + ' / ' + questions.length;

      // Message personnalisÃ©
      const percentage = (score / questions.length) * 100;
      if (percentage === 100) {
        resultMessage.textContent = 'ğŸ† Parfait ! Vous maÃ®trisez ce niveau !';
      } else if (percentage >= 80) {
        resultMessage.textContent = 'ğŸ‘ Excellent travail ! Continuez comme Ã§a !';
      } else if (percentage >= 60) {
        resultMessage.textContent = 'ğŸ‘ Bon travail ! Encore un peu de pratique !';
      } else {
        resultMessage.textContent = 'ğŸ’ª Continuez Ã  pratiquer, vous progressez !';
      }

      retryBtn.onclick = () => {
        window.location.reload();
      };
    }

    // DÃ©tection du changement de hash
    window.addEventListener('hashchange', initQuiz);

    // DÃ©marrage
    initQuiz();
  </script>
</body>
</html>